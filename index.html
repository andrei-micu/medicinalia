<!DOCTYPE html>
<html ng-app="medicinalia">
<head lang="en">
    <meta charset="UTF-8">

    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap-theme.css">
    <link rel="stylesheet" href="css/ng-tags-input.css">
    <link rel="stylesheet" href="css/ng-tags-input.bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap-multiselect.css">

    <link rel="stylesheet" href="style.css">


    <script type="application/javascript" src="js/jquery-2.1.3.js"></script>
    <script type="application/javascript" src="js/bootstrap.js"></script>

    <script type="application/javascript" src="js/angular.js"></script>
    <script type="application/javascript" src="js/angular-animate.js"></script>
    <script type="application/javascript" src="js/angular-mocks.js"></script>
    <script type="application/javascript" src="js/ui-bootstrap-tpls-0.12.0.js"></script>
    <script type="application/javascript" src="js/ng-tags-input.js"></script>
    <script type="application/javascript" src="js/bootstrap-multiselect.js"></script>

    <script type="application/javascript" src="js/json2.js"></script>
    <script type="application/javascript" src="js/minify.json.js"></script>

    <script type="application/javascript" src="app.js"></script>
    <script type="application/javascript" src="mocking.js"></script>

    <title>Medicinalia</title>

    <meta name="keywords" content="project, infoiasi, wade, web"/>
</head>
<body ng-controller="MainController as mainCtrl">

<div class="navbar navbar-fixed-top" ng-class="{blurred : modalOpen}">
    <div class="container-fluid container-navbar">
        <img src="medicinalia-logo.png" class="navbar-brand logo"/>


        <form class="search-form" role="search" ng-submit="performSearch(searchObject)" novalidate>

            <tags-input id="search-textbox" class="search-textbox" ng-model="searchObject" min-length="1" replace-spaces-with-dashes="false"
                        placeholder="Type a name or add a constraint, then press Search ...">
            </tags-input>

            <div class="btn-group filter-button-container" dropdown>
                <button type="button" class="dropdown-toggle filter-button" dropdown-toggle>
                    <span class="glyphicon glyphicon-filter"></span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right filter-dropdown" role="menu" stop-event="click keydown">
                    <li ng-repeat="(filterName, filterValues) in filterData">
                        <div class="filter-input">
                            <div class="input-group">
                                <span class="input-group-addon">{{filterValues.friendlyName}}:</span>
                                <input type="text" class="form-control" ng-model="filterData[filterName].value"/>
                            </div>
                        </div>
                        <button type="button" class="btn filter-input-button" ng-click="addFilter(searchObject, filterName)"
                                ng-disabled="!filterData[filterName].value">
                            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                        </button>
                    </li>
                </ul>
            </div>

            <button type="submit" class="search-button" ng-disabled="isSearchInvalid(searchObject)">
                Search
            </button>
        </form>
    </div>
</div>

<div class="container search-results-container" ng-class="{blurred : modalOpen}">
    <table class="table table-hover" ng-show="searchResults.results">
        <thead>
        <tr>
            <th></th>
            <th ng-click="changeSorting('name')"
                ng-class="getColorClassForColumn('name')">
                Name
                <span ng-class="getCaretClassForColumn('name')"></span>
            </th>
            <th ng-show="shownHeaders.description">Description</th>
            <th ng-show="shownHeaders.vitcMg"
                ng-click="changeSorting('vtcMg')"
                ng-class="getColorClassForColumn('vtcMg')">
                Vitamin-C
                <span ng-class="getCaretClassForColumn('vtcMg')"></span>
            </th>
            <th>
                <select id="headers-dropdown" multiple="multiple">
                    <option value="description" selected="selected">Description</option>
                    <option value="vitcMg">Vitamin-C</option>
                </select>
            </th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="searchResultId in (results = searchResults.results) | sortUsingOptions:sortingOptions:searchResultsData"
            ng-show="searchResultsData[searchResultId]"
            class="clickable" ng-click="openPlantDetailsWindow(searchResultId)">

            <td><img ng-src="{{searchResultsData[searchResultId].photo_links[0]}}" class="plant-thumbnail-search"/></td>
            <td>{{searchResultsData[searchResultId].name}}</td>
            <td ng-show="shownHeaders.description">{{searchResultsData[searchResultId].description}}</td>
            <td ng-show="shownHeaders.vitcMg" class="text-center">
                {{searchResultsData[searchResultId].metadata.vitamins.vitcMg | showMilligramsPer100Grams}}
            </td>
            <td></td>
        </tr>
        </tbody>
    </table>
</div>

<div class="navbar navbar-fixed-bottom ad-bar" ng-show="showAdBar" ng-class="{blurred : modalOpen}">
    <div class="container-fluid">
        <div class="nav plant-thumbnail-ad-bar-container pull-left">
            <img class="plant-thumbnail-ad-bar"
                 src="https://www.googleapis.com/freebase/v1/image/m/02f8wvh?key=AIzaSyCQVC9yA72POMg2VjiQhSJQQP1nf3ToZTs&maxwidth=960"/>
        </div>

        <div class="nav ad-text-container pull-left">
            <span class="ad-text">
                Since we're in the cold season, Medicinalia recommends you <strong>Chamomile</strong>!
                This plant is known for containing a high amount of Vitamin C, which will keep your immune system
                up-and-running.
            </span>
        </div>

        <div class="nav navbar-right pull-right">
            <div class="close-ad-button-container">
                <div class="close-ad-button clickable text-center" aria-label="Close" ng-click="showAdBar=0" ng-init="showAdBar=1">
                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                </div>
            </div>
        </div>

        <!-- Glyphicons Halflings are available for free through Bootstrap. Check them out here: http://glyphicons.com/ -->
    </div>
</div>

<script type="text/ng-template" id="plant-details-template.html">

    <div class="modal-header">
        <h3 class="modal-title">{{ plantData.name }}</h3>
    </div>

    <div class="modal-body">
        <div class="modal-container">

            <div class="modal-gallery col-xs-3">
                <img ng-repeat="plantImage in plantData.photo_links" ng-src="{{plantImage}}" class="plant-thumbnail-details" />
            </div>

            <div class="modal-details col-xs-9">
                <tabset type="pills">
                    <tab heading="Description">
                        {{plantData.description}}
                    </tab>
                    <tab heading="Other">
                        Bla bla
                    </tab>
                </tabset>
            </div>
        </div>
    </div>

    <div class="modal-footer">
        <button class="btn btn-success" ng-click="close()">Close</button>
    </div>
</script>

</body>
</html>